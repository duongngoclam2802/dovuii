<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Game ƒê·ªë Vui C√≥ ƒê·ªìng H·ªì G√≥c Ph·∫£i</title>
  <style>
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(to right, #ffffff, #ffffff);
      /* Kh√¥ng set overflow hidden, ƒë·ªÉ cho ph√©p cu·ªôn trang */
      overflow-y: auto;
    }

    body {
      display: flex;
      justify-content: center;
      align-items: flex-start; /* cho ph√©p cu·ªôn */
      padding: 20px 0;
      min-height: 100vh;
      box-sizing: border-box;
    }

    #loading {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: #fff;
      z-index: 9999;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    #loading img {
      width: 100px;
      height: 100px;
    }

    .quiz-container {
      display: none;
      padding: 30px;
      border-radius: 20px;
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
      max-width: 700px;
      width: 95%;
      background: #ade787;
      text-align: center;
      position: relative;
      padding-top: 70px; /* kho·∫£ng tr·ªëng cho ƒë·ªìng h·ªì */
      box-sizing: border-box;
    }

    h1 {
      color: #00695c;
      margin-bottom: 10px;
    }

    .icon {
      font-size: 36px;
      margin-bottom: 10px;
    }

    #question {
      font-size: 22px;
      margin-bottom: 15px;
      color: #333;
      position: relative;
      z-index: 10;
      padding-right: 100px; /* tr√°nh ch√®n l√™n ƒë·ªìng h·ªì */
      word-wrap: break-word;
    }

    /* ƒê·ªìng h·ªì tr√≤n g√≥c tr√™n ph·∫£i */
    #timer {
      position: absolute;
      top: 15px;
      right: 15px;
      width: 60px;
      height: 60px;
      user-select: none;
      z-index: 1;
    }

    svg {
      transform: rotate(-90deg);
      width: 60px;
      height: 60px;
    }

    circle {
      fill: none;
      stroke-width: 6;
      stroke-linecap: round;
    }

    #timer-bg {
      stroke: #eee;
    }

    #timer-fg {
      stroke: #00796b;
      transition: stroke 0.3s;
      stroke-dasharray: 163.3628;
      stroke-dashoffset: 0;
    }

    /* Khi g·∫ßn h·∫øt gi·ªù */
    #timer.warning #timer-fg {
      stroke: #d32f2f !important;
      animation: pulse 1s infinite;
    }

    @keyframes pulse {
      0%, 100% { stroke-opacity: 1; }
      50% { stroke-opacity: 0.4; }
    }

    #answers {
      max-height: 300px; /* gi·ªõi h·∫°n chi·ªÅu cao ƒë·ªÉ tr√°nh qu√° d√†i */
      overflow-y: auto;
      margin-bottom: 10px;
      -webkit-overflow-scrolling: touch;
    }

    .answer {
      background: #f1f1f1;
      margin: 10px 0;
      padding: 12px;
      border-radius: 10px;
      cursor: pointer;
      transition: 0.2s;
      border: 2px solid transparent;
      user-select: none;
    }

    .answer:hover {
      background: #e0f7fa;
      border-color: #26c6da;
    }

    .btn-group {
      margin-top: 20px;
      display: flex;
      justify-content: center;
      gap: 15px;
      flex-wrap: wrap;
    }

    button {
      background-color: #00796b;
      color: white;
      border: none;
      padding: 12px 20px;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      transition: background 0.3s;
      user-select: none;
    }

    button:hover {
      background-color: #004d40;
    }

    #score {
      margin-top: 15px;
      font-weight: bold;
      font-size: 18px;
      color: #00796b;
    }

    #hint, #explanation {
      margin-top: 10px;
      color: #555;
      font-style: italic;
      min-height: 36px;
    }

    @media screen and (max-width: 480px) {
      .btn-group {
        flex-direction: column;
      }

      button {
        width: 100%;
      }

      #question {
        font-size: 18px;
        padding-right: 80px;
      }
    }
  </style>
</head>
<body>

<div id="loading">
  <div>ƒêang t·∫£i game...</div>
  <img src="https://i.gifer.com/YCZH.gif" alt="ƒêang t·∫£i..." />
</div>

<div class="quiz-container" id="quiz">
  <div class="icon">üß†</div>
  <h1>Tr√≤ Ch∆°i ƒê·ªë Vui</h1>

  <div id="question">C√¢u h·ªèi ƒëang t·∫£i...</div>

  <div id="timer" title="Th·ªùi gian c√≤n l·∫°i">
    <svg>
      <circle id="timer-bg" cx="30" cy="30" r="26"></circle>
      <circle id="timer-fg" cx="30" cy="30" r="26"></circle>
    </svg>
  </div>

  <div id="answers"></div>
  <div id="hint"></div>
  <div class="btn-group">
    <button onclick="showHint()">‚ùì Tr·ª£ gi√∫p</button>
    <button onclick="nextQuestion()">‚û°Ô∏è C√¢u ti·∫øp theo</button>
  </div>
  <div id="score"></div>
  <div id="explanation"></div>
</div>

<script>
  const questions = [
    {
      question: "ü¶Å Con g√¨ l√† ch√∫a t·ªÉ r·ª´ng xanh?",
      answers: ["Con voi", "Con h·ªï", "Con s∆∞ t·ª≠", "Con b√°o"],
      correct: 2,
      hint: "ü¶Å L√† vua c·ªßa mu√¥n lo√†i trong phim Lion King.",
      explanation: "Con s∆∞ t·ª≠ ƒë∆∞·ª£c g·ªçi l√† 'ch√∫a t·ªÉ s∆°n l√¢m' nh·ªù s·ª©c m·∫°nh, d√°ng ƒëi uy nghi v√† l√† lo√†i sƒÉn m·ªìi ƒë·ª©ng ƒë·∫ßu chu·ªói th·ª©c ƒÉn."
    },
    {
      question: "üáªüá≥ Th·ªß ƒë√¥ c·ªßa Vi·ªát Nam l√†?",
      answers: ["H·ªì Ch√≠ Minh", "ƒê√† N·∫µng", "Hu·∫ø", "H√† N·ªôi"],
      correct: 3,
      hint: "üèôÔ∏è N∆°i c√≥ LƒÉng B√°c v√† H·ªì G∆∞∆°m.",
      explanation: "H√† N·ªôi l√† th·ªß ƒë√¥ c·ªßa Vi·ªát Nam t·ª´ nƒÉm 1945 v√† l√† trung t√¢m ch√≠nh tr·ªã, vƒÉn h√≥a l·ªõn nh·∫•t n∆∞·ªõc."
    },
    {
      question: "üçö Ng∆∞·ªùi Vi·ªát th∆∞·ªùng ƒÉn g√¨ v√†o b·ªØa s√°ng?",
      answers: ["B√°nh m√¨", "Ph·ªü", "C∆°m t·∫•m", "T·∫•t c·∫£ ƒë·ªÅu ƒë√∫ng"],
      correct: 3,
      hint: "üáªüá≥ Ng∆∞·ªùi Vi·ªát c√≥ nhi·ªÅu m√≥n s√°ng ƒëa d·∫°ng.",
      explanation: "T√πy v√πng mi·ªÅn, ng∆∞·ªùi Vi·ªát ƒÉn s√°ng b·∫±ng b√°nh m√¨, ph·ªü, c∆°m t·∫•m, b√∫n, x√¥i... r·∫•t phong ph√∫!"
    },
    {
      question: "üß† B·ªô ph·∫≠n n√†o gi√∫p con ng∆∞·ªùi suy nghƒ©?",
      answers: ["Tim", "Gan", "N√£o", "Ph·ªïi"],
      correct: 2,
      hint: "üß† B·ªô ph·∫≠n n√†y ƒëi·ªÅu khi·ªÉn h·ªá th·∫ßn kinh.",
      explanation: "N√£o b·ªô ƒëi·ªÅu khi·ªÉn m·ªçi ho·∫°t ƒë·ªông th·∫ßn kinh v√† x·ª≠ l√Ω th√¥ng tin ‚Äì l√† trung t√¢m t∆∞ duy, tr√≠ nh·ªõ v√† c·∫£m x√∫c."
    },
    {
      question: "üåç Tr√°i ƒê·∫•t c√≥ h√¨nh d·∫°ng g√¨?",
      answers: ["Vu√¥ng", "D·∫πt", "Tr√≤n", "H√¨nh tam gi√°c"],
      correct: 2,
      hint: "üåê N√≥ gi·ªëng m·ªôt qu·∫£ b√≥ng.",
      explanation: "Tr√°i ƒê·∫•t c√≥ h√¨nh c·∫ßu h∆°i d·∫πt ·ªü hai c·ª±c ‚Äì g·ªçi l√† h√¨nh elip ‚Äì nh∆∞ng v·ªÅ c∆° b·∫£n l√† h√¨nh tr√≤n."
    }
  ];

  let currentQuestion = 0;
  let score = 0;
  let answered = false;

  // ƒê·ªìng h·ªì
  let timer;
  let timeLeft = 15;
  const FULL_DASH_ARRAY = 2 * Math.PI * 26; // Chu vi v√≤ng tr√≤n b√°n k√≠nh 26

  const timerFg = document.getElementById("timer-fg");
  const timerContainer = document.getElementById("timer");

  function setCircleDashoffset(timeFraction) {
    const dashoffset = FULL_DASH_ARRAY * (1 - timeFraction);
    timerFg.style.strokeDashoffset = dashoffset;
  }

  function startTimer() {
    timeLeft = 15;
    updateTimerDisplay();
    answered = false;
    timerContainer.classList.remove("warning");

    clearInterval(timer);
    timer = setInterval(() => {
      timeLeft--;
      updateTimerDisplay();

      if (timeLeft <= 5) {
        timerContainer.classList.add("warning");
      }

      if (timeLeft <= 0) {
        clearInterval(timer);
        handleTimeout();
      }
    }, 1000);
  }

  function updateTimerDisplay() {
    timerContainer.setAttribute("title", `Th·ªùi gian c√≤n l·∫°i: ${timeLeft}s`);
    const timeFraction = timeLeft / 15;
    setCircleDashoffset(timeFraction);
  }

  function handleTimeout() {
    if (answered) return;
    answered = true;
    alert("‚è∞ H·∫øt gi·ªù! ƒê√°p √°n ƒë√∫ng l√†: " + questions[currentQuestion].answers[questions[currentQuestion].correct]);
    document.getElementById("score").innerText = `üéØ ƒêi·ªÉm: ${score}/${questions.length}`;
    document.getElementById("explanation").innerText = "‚ÑπÔ∏è " + questions[currentQuestion].explanation;
  }

  function loadQuestion() {
    const q = questions[currentQuestion];
    document.getElementById("question").innerText = q.question;
    const answersDiv = document.getElementById("answers");
    answersDiv.innerHTML = "";
    document.getElementById("hint").innerText = "";
    document.getElementById("explanation").innerText = "";
    document.getElementById("score").innerText = `üéØ ƒêi·ªÉm: ${score}/${questions.length}`;

    q.answers.forEach((ans, i) => {
      const btn = document.createElement("div");
      btn.className = "answer";
      btn.innerText = ans;
      btn.onclick = () => checkAnswer(i);
      answersDiv.appendChild(btn);
    });

    startTimer();
  }

  function checkAnswer(selected) {
    if (answered) return;
    answered = true;
    clearInterval(timer);

    const q = questions[currentQuestion];
    const answersDiv = document.getElementById("answers");
    const children = answersDiv.children;

    if (selected === q.correct) {
      score++;
      children[selected].style.backgroundColor = "#a5d6a7"; // xanh l√°
      alert("‚úÖ Ch√≠nh x√°c!");
    } else {
      children[selected].style.backgroundColor = "#ef9a9a"; // ƒë·ªè nh·∫°t
      children[q.correct].style.backgroundColor = "#a5d6a7"; // xanh l√° ƒë√°p √°n ƒë√∫ng
      alert(`‚ùå Sai r·ªìi! ƒê√°p √°n ƒë√∫ng l√†: ${q.answers[q.correct]}`);
    }

    document.getElementById("score").innerText = `üéØ ƒêi·ªÉm: ${score}/${questions.length}`;
    document.getElementById("explanation").innerText = "‚ÑπÔ∏è " + q.explanation;
  }

  function nextQuestion() {
    if (!answered) {
      alert("‚ö†Ô∏è B·∫°n ch∆∞a tr·∫£ l·ªùi c√¢u h·ªèi!");
      return;
    }
    currentQuestion++;
    if (currentQuestion >= questions.length) {
      alert(`üéâ K·∫øt th√∫c! B·∫°n ƒë∆∞·ª£c ${score} ƒëi·ªÉm tr√™n ${questions.length} c√¢u.`);
      currentQuestion = 0;
      score = 0;
    }
    loadQuestion();
  }

  function showHint() {
    if (answered) return;
    alert("üí° G·ª£i √Ω: " + questions[currentQuestion].hint);
  }

  window.onload = () => {
    setTimeout(() => {
      document.getElementById("loading").style.display = "none";
      document.getElementById("quiz").style.display = "block";
      loadQuestion();
    }, 2500);
  };
</script>

</body>
</html>
